{% extends 'layout/dashboard/index.html' %}
{% load staticfiles %}
{% block content %}
<section class="content">
  <div class="row">
    <div class="col-sm-12">
      <div id="contoh">
        <ul class="nav nav-tabs">
          <div class="content-wrapper">
            <section class="content-header">
              <div class="header text-center">
                <h2 class="title">FEDERASI PERJUANGAN BURUH INDONESIA </h2  >
                <h4 class= "title"> $ FPBI CABANG KOTA MATARAM $ </h4>
              </div>
              <h1>
                Data Pemilih 
                <small>Template</small>
                <a class="btn btn-info pull-right" data-toggle="modal" data-target="#modal-default"><i class="fa fa-plus-square">   Tambah Data</i></a>
              </h1>

            </section>
            <section class="content">
              <div class="box">
                <div class="box-body">
                  <div class="box-header">
                    <div class="">

                      <table id="example1" class="table table-responsive table-striped table-hover">
                        <thead>
                          <tr>
                            <th>User</th>
                            <th>Nip</th>
                            <th>Nama</th>
                            <th>Perusahaan </th>
                            <th>Jenis Kelamin</th>
                            <th>Aksi</th>
                          </tr>
                        </thead>
                        <tbody>
                          {% for a in pemilih %}
                          <tr>
                            <td>{{a.user}}</td>
                            <td>{{a.nip}}</td>
                            <td>{{a.nama}}</td>
                            <td>{{a.nama_ptp}}</td>
                            <td>{{a.jenis_kelamin}}</td>




                            <td >
                              <a href="{% url 'data_pemilih:detail_pemilih' a.id%}" class="btn btn-info">
                              <i class="fa fa-eye"></i>
                            </a>

                            <button class="btn btn-danger" data-toggle="modal" data-target="#myModal{{a.id}}">
                              <i class="fa fa-trash"></i>
                            </button>
                                 <a href="{% url 'data_pemilih:edit_pemilih' a.id%}" type="submit" class="btn btn-primary"><i class="fa fa-pencil"></i></a>

                            <!-- Modal -->
                            <div class="modal fade" id="myModal{{a.id}}" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
                              <div class="modal-dialog modal-md modal-dialogs" role="document">
                                <div class="modal-content">
                                  <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                                    <h4 class="modal-title" id="myModalLabel">Konfirmasi Penghapusan</h4>
                                  </div>
                                  <div class="modal-body">
                                    Apakah anda yakin ingin menghapus Pemilih dengan Nama <b>{{a.nama}}</b> dan id <b>{{a.id}}</b>?
                                  </div>
                                  <div class="modal-footer">
                                    <button type="button" class="btn btn-default" data-dismiss="modal">Tutup</button>
                                    <a href="{% url 'data_pemilih:hapus_pemilih' id=a.id %}" class="btn btn-danger">
                                      <i class="fa fa-trash"></i> Hapus
                                    </a>
                                  </div>
                                </div>
                              </div>
                            </div>
                          </td>
                        </tr>
                        {% endfor %} 
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </section>
          </div>
        </section>
        <div class="modal fade" id="modal-default">
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <span aria-hidden="true">&times;</span>
                </button>
                <h3 class="modal-title">Data Awal</h3>
                <div class="box-body">
                </div>
                <div class="modal-body">
                  <form  action="{% url 'data_pemilih:save_pemilih'%}" method="POST" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="row">
                      <div class="col-md-4">
                        <img src="{% static 'images/icon.png' %}" id="picture" alt="" style="width: 80%; height: auto;">
                        <button class="btn btn-success btn-block" style="margin-top: 8px; margin-bottom: 8px;" onclick="document.getElementById('fileInput').click();">
                          Upload Foto<i class="fa fa-upload"></i>
                        </button>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="" class="control-label">Nomor Induk Pekerja</label>
                          <input type="text" class="form-control" name="nip"  required>
                        </div>
                        <div class="form-group">
                          <label for="" class="control-label">Nama Perusahaan</label>
                          <input type="text" class="form-control" name="nama_ptp"  required>
                        </div>
                        <div class="form-group">
                          <label for="" class="control-label">Nama Pekerja</label>
                          <input type="text" class="form-control" name="nama"  required>
                        </div>
                        <div class="form-group">
                          <label for="" class="control-label">Jenis Kelamin</label>
                          <br/>
                          <input required type="radio" name="jenis_kelamin" value="Pria"> Laki - Laki &nbsp; &nbsp; &nbsp;
                          <input required type="radio" name="jenis_kelamin" value="Wanita"> Perempuan
                        </div>
                      </div>
                      <div class="col-md-4">
                        <div class="form-group">
                          <label for="" class="control-label">Username</label>
                          <input type="text" class="form-control"  name="user"  required>
                        </div>
                        <div class="form-group">
                          <label for="" class="control-label">Password</label>
                          <input type="text" class="form-control" name="password"  required>
                        </div>
                        <div class="form-group " hidden>
                          <label for="" class="control-label">
                            Aktifkan Langsung User ?
                          </label> &nbsp; <input type="checkbox" name="staff" checked>
                        </div> 
                        <div align="right">
                          <button type="submit" class="btn btn-primary">Save</button>
                          <button type="submit" class="btn btn-primary">Cancel</button>

                        </div> 
                      </div>
                    </div>
                  </form>
                </div>
              </div>
            </div>
          </div>
          <style>
          .modal-dialog{
            width: 90%;
            border-radius:10%;
          }
          .modal-dialogs{
            width: 40%;
          }
        </style>
        <script type="text/javascript">
          $('#date').datepicker();
          $(document).ready(function() {
            $('#example1').DataTable( {
              "lengthMenu": [[5, 10, 25, 50, ], [5, 10, 25, 50,]]
            } );
          } );
        </script>


        {% if messages %} {% for message in messages %}
        <script>
          toastr.success('{{message}}')

          function readURL(input) {

            if (input.files && input.files[0]) {
              var reader = new FileReader();

              reader.onload = function (e) {
                $('#picture').attr('src', e.target.result);
              }

              reader.readAsDataURL(input.files[0]);
            }
          }

          $("#fileInput").change(function () {
            readURL(this);
          });         
        </script>
        {% endfor %} {% endif %}


        {% endblock %}